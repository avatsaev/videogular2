!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs/Observable"),require("rxjs/Subject"),require("rxjs/add/observable/fromEvent"),require("rxjs/add/observable/combineLatest")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","rxjs/Observable","rxjs/Subject","rxjs/add/observable/fromEvent","rxjs/add/observable/combineLatest"],t):t((e.videogular=e.videogular||{},e.videogular.core={}),e.ng.core,e.ng.common,e.Rx,e.Rx)}(this,function(e,t,i,r,n){"use strict";function s(e,t){return t={exports:{}},e(t,t.exports),t.exports}function o(){try{return _.apply(this,arguments)}catch(e){return w.errorObject.e=e,w.errorObject}}function c(e){return e.reduce(function(e,t){return e.concat(t instanceof C.UnsubscriptionError?t.errors:t)},[])}function a(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:N.noop}var u=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o};e.VgStates=function(){return function(){}}(),e.VgStates.VG_ENDED="ended",e.VgStates.VG_PAUSED="paused",e.VgStates.VG_PLAYING="playing",e.VgStates.VG_LOADING="waiting",e.VgStates=u([t.Injectable()],e.VgStates);var l=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.VgAPI=function(){function i(){this.medias={},this.playerReadyEvent=new t.EventEmitter(!0),this.isPlayerReady=!1}return i.prototype.onPlayerReady=function(e){this.fsAPI=e,this.isPlayerReady=!0,this.playerReadyEvent.emit(this)},i.prototype.getDefaultMedia=function(){for(var e in this.medias)if(this.medias[e])return this.medias[e]},i.prototype.getMasterMedia=function(){var e;for(var t in this.medias)if("true"===this.medias[t].vgMedia||!0===this.medias[t].vgMedia){e=this.medias[t];break}return e||this.getDefaultMedia()},i.prototype.isMasterDefined=function(){var e=!1;for(var t in this.medias)if("true"===this.medias[t].vgMedia||!0===this.medias[t].vgMedia){e=!0;break}return e},i.prototype.getMediaById=function(e){void 0===e&&(e=null);var t=this.medias[e];return e&&"*"!==e||(t=this),t},i.prototype.play=function(){for(var e in this.medias)this.medias[e]&&this.medias[e].play()},i.prototype.pause=function(){for(var e in this.medias)this.medias[e]&&this.medias[e].pause()},Object.defineProperty(i.prototype,"duration",{get:function(){return this.$$getAllProperties("duration")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentTime",{get:function(){return this.$$getAllProperties("currentTime")},set:function(e){this.$$setAllProperties("currentTime",e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"state",{get:function(){return this.$$getAllProperties("state")},set:function(e){this.$$setAllProperties("state",e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"volume",{get:function(){return this.$$getAllProperties("volume")},set:function(e){this.$$setAllProperties("volume",e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playbackRate",{get:function(){return this.$$getAllProperties("playbackRate")},set:function(e){this.$$setAllProperties("playbackRate",e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canPlay",{get:function(){return this.$$getAllProperties("canPlay")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canPlayThrough",{get:function(){return this.$$getAllProperties("canPlayThrough")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isMetadataLoaded",{get:function(){return this.$$getAllProperties("isMetadataLoaded")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isWaiting",{get:function(){return this.$$getAllProperties("isWaiting")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isCompleted",{get:function(){return this.$$getAllProperties("isCompleted")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isLive",{get:function(){return this.$$getAllProperties("isLive")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isMaster",{get:function(){return this.$$getAllProperties("isMaster")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"time",{get:function(){return this.$$getAllProperties("time")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"buffer",{get:function(){return this.$$getAllProperties("buffer")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"buffered",{get:function(){return this.$$getAllProperties("buffered")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"subscriptions",{get:function(){return this.$$getAllProperties("subscriptions")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textTracks",{get:function(){return this.$$getAllProperties("textTracks")},enumerable:!0,configurable:!0}),i.prototype.seekTime=function(e,t){void 0===t&&(t=!1);for(var i in this.medias)this.medias[i]&&this.$$seek(this.medias[i],e,t)},i.prototype.$$seek=function(e,t,i){void 0===i&&(i=!1);var r,n=e.duration;i?(this.isMasterDefined()&&(n=this.getMasterMedia().duration),r=t*n/100):r=t,e.currentTime=r},i.prototype.addTextTrack=function(e,t,i){for(var r in this.medias)this.medias[r]&&this.$$addTextTrack(this.medias[r],e,t,i)},i.prototype.$$addTextTrack=function(e,t,i,r){e.addTextTrack(t,i,r)},i.prototype.$$getAllProperties=function(t){var i,r={};for(var n in this.medias)this.medias[n]&&(r[n]=this.medias[n]);switch(Object.keys(r).length){case 0:switch(t){case"state":i=e.VgStates.VG_PAUSED;break;case"playbackRate":case"volume":i=1;break;case"time":i={current:0,total:0,left:0}}break;case 1:i=r[Object.keys(r)[0]][t];break;default:i=r[this.getMasterMedia().id][t]}return i},i.prototype.$$setAllProperties=function(e,t){for(var i in this.medias)this.medias[i]&&(this.medias[i][e]=t)},i.prototype.registerElement=function(e){this.videogularElement=e},i.prototype.registerMedia=function(e){this.medias[e.id]=e},i.prototype.unregisterMedia=function(e){delete this.medias[e.id]},i}(),e.VgAPI=l([t.Injectable(),h("design:paramtypes",[])],e.VgAPI);var f=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o};e.VgUtils=function(){function e(){}return e.getZIndex=function(){for(var e,t=1,i=document.getElementsByTagName("*"),r=0,n=i.length;r<n;r++)(e=parseInt(window.getComputedStyle(i[r])["z-index"],10))>t&&(t=e+1);return t},e.isMobileDevice=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")},e.isiOSDevice=function(){return navigator.userAgent.match(/ip(hone|ad|od)/i)&&!navigator.userAgent.match(/(iemobile)[\/\s]?([\w\.]*)/i)},e.isCordova=function(){return-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")},e}(),e.VgUtils=f([t.Injectable()],e.VgUtils);var p=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.VgFullscreenAPI=function(){function i(){this.nativeFullscreen=!0,this.isFullscreen=!1,this.onChangeFullscreen=new t.EventEmitter}return i.prototype.init=function(t,i){var n=this;this.videogularElement=t,this.medias=i;var s={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",onchange:"fullscreenchange",onerror:"fullscreenerror"},newWebkit:{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",onchange:"webkitfullscreenchange",onerror:"webkitfullscreenerror"},oldWebkit:{enabled:"webkitIsFullScreen",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",onchange:"webkitfullscreenchange",onerror:"webkitfullscreenerror"},moz:{enabled:"mozFullScreen",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",onchange:"mozfullscreenchange",onerror:"mozfullscreenerror"},ios:{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitEnterFullscreen",exit:"webkitExitFullscreen",onchange:"webkitendfullscreen",onerror:"webkitfullscreenerror"},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",onchange:"MSFullscreenChange",onerror:"MSFullscreenError"}};for(var o in s)if(s[o].enabled in document){this.polyfill=s[o];break}if(e.VgUtils.isiOSDevice()&&(this.polyfill=s.ios),this.isAvailable=null!=this.polyfill,null!=this.polyfill){var c;switch(this.polyfill.onchange){case"mozfullscreenchange":c=document;break;case"webkitendfullscreen":c=this.medias.toArray()[0].elem;break;default:c=t}this.fsChangeSubscription=r.Observable.fromEvent(c,this.polyfill.onchange).subscribe(function(){n.onFullscreenChange()})}},i.prototype.onFullscreenChange=function(){this.isFullscreen=!!document[this.polyfill.element],this.onChangeFullscreen.next(this.isFullscreen)},i.prototype.toggleFullscreen=function(e){void 0===e&&(e=null),this.isFullscreen?this.exit():this.request(e)},i.prototype.request=function(t){t||(t=this.videogularElement),this.isFullscreen=!0,this.onChangeFullscreen.next(!0),this.isAvailable&&this.nativeFullscreen&&(e.VgUtils.isMobileDevice()?((!this.polyfill.enabled&&t===this.videogularElement||e.VgUtils.isiOSDevice())&&(t=this.medias.toArray()[0].elem),this.enterElementInFullScreen(t)):this.enterElementInFullScreen(this.videogularElement))},i.prototype.enterElementInFullScreen=function(e){e[this.polyfill.request]()},i.prototype.exit=function(){this.isFullscreen=!1,this.onChangeFullscreen.next(!1),this.isAvailable&&this.nativeFullscreen&&document[this.polyfill.exit]()},i}(),e.VgFullscreenAPI=p([t.Injectable(),d("design:paramtypes",[])],e.VgFullscreenAPI);var b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},y={isArray:Array.isArray||function(e){return e&&"number"==typeof e.length}},g={isNumeric:function(e){return!y.isArray(e)&&e-parseFloat(e)+1>=0}},v="undefined"!=typeof window&&window,m="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,E=v||void 0!==b&&b||m,P=E;!function(){if(!E)throw new Error("RxJS could not find any global context (window, self, global)")}();var _,V={root:P},O={isFunction:function(e){return"function"==typeof e}},S={isObject:function(e){return null!=e&&"object"==typeof e}},w={errorObject:{e:{}}},A={tryCatch:function(e){return _=e,o}},x=b&&b.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},C={UnsubscriptionError:function(e){function t(t){e.call(this),this.errors=t;var i=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=i.name="UnsubscriptionError",this.stack=i.stack,this.message=i.message}return x(t,e),t}(Error)},R={Subscription:function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var i=this._parent,r=this._parents,n=this._unsubscribe,s=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var o=-1,a=r?r.length:0;i;)i.remove(this),i=++o<a&&r[o]||null;if(O.isFunction(n)){(l=A.tryCatch(n).call(this))===w.errorObject&&(t=!0,e=e||(w.errorObject.e instanceof C.UnsubscriptionError?c(w.errorObject.e.errors):[w.errorObject.e]))}if(y.isArray(s))for(o=-1,a=s.length;++o<a;){var u=s[o];if(S.isObject(u)){var l=A.tryCatch(u.unsubscribe).call(u);if(l===w.errorObject){t=!0,e=e||[];var h=w.errorObject.e;h instanceof C.UnsubscriptionError?e=e.concat(c(h.errors)):e.push(h)}}}if(t)throw new C.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var i=t;switch(typeof t){case"function":i=new e(t);case"object":if(i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if("function"!=typeof i._addParent){var r=i;(i=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(i),i._addParent(this),i},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var i=t.indexOf(e);-1!==i&&t.splice(i,1)}},e.prototype._addParent=function(e){var t=this._parent,i=this._parents;t&&t!==e?i?-1===i.indexOf(e)&&i.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}()},D={empty:{closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},j=s(function(e,t){var i=V.root.Symbol;t.rxSubscriber="function"==typeof i&&"function"==typeof i["for"]?i["for"]("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber}),T=(j.rxSubscriber,j.$$rxSubscriber,b&&b.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),M=function(e){function t(i,r,n){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=D.empty;break;case 1:if(!i){this.destination=D.empty;break}if("object"==typeof i){i instanceof t?(this.destination=i,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new G(this,i));break}default:this.syncErrorThrowable=!0,this.destination=new G(this,i,r,n)}}return T(t,e),t.prototype[j.rxSubscriber]=function(){return this},t.create=function(e,i,r){var n=new t(e,i,r);return n.syncErrorThrowable=!1,n},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(R.Subscription),k=M,G=function(e){function t(t,i,r,n){e.call(this),this._parentSubscriber=t;var s,o=this;O.isFunction(i)?s=i:i&&(s=i.next,r=i.error,n=i.complete,i!==D.empty&&(o=Object.create(i),O.isFunction(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=r,this._complete=n}return T(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var i=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(i){throw this.unsubscribe(),i}},t.prototype.__tryOrSetError=function(e,t,i){try{t.call(this._context,i)}catch(r){return e.syncErrorValue=r,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(M),I={Subscriber:k},F={toSubscriber:function(e,t,i){if(e){if(e instanceof I.Subscriber)return e;if(e[j.rxSubscriber])return e[j.rxSubscriber]()}return e||t||i?new I.Subscriber(e,t,i):new I.Subscriber(D.empty)}},$=s(function(e,t){function i(e){var t,i=e.Symbol;return"function"==typeof i?i.observable?t=i.observable:(t=i("observable"),i.observable=t):t="@@observable",t}t.getSymbolObservable=i,t.observable=i(V.root),t.$$observable=t.observable}),N=($.getSymbolObservable,$.observable,$.$$observable,{noop:function(){}}),L={pipe:function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return a(e)},pipeFromArray:a},U={Observable:function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var i=new e;return i.source=this,i.operator=t,i},e.prototype.subscribe=function(e,t,i){var r=this.operator,n=F.toSubscriber(e,t,i);if(r?r.call(n,this.source):n.add(this.source?this._subscribe(n):this._trySubscribe(n)),n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var i=this;if(t||(V.root.Rx&&V.root.Rx.config&&V.root.Rx.config.Promise?t=V.root.Rx.config.Promise:V.root.Promise&&(t=V.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var n;n=i.subscribe(function(t){if(n)try{e(t)}catch(i){r(i),n.unsubscribe()}else e(t)},r,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[$.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 0===e.length?this:L.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;if(e||(V.root.Rx&&V.root.Rx.config&&V.root.Rx.config.Promise?e=V.root.Rx.config.Promise:V.root.Promise&&(e=V.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,i){var r;t.subscribe(function(e){return r=e},function(e){return i(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}()},B=b&&b.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},H={Action:function(e){function t(t,i){e.call(this)}return B(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(R.Subscription)},q=b&&b.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},Y={AsyncAction:function(e){function t(t,i){e.call(this,t,i),this.scheduler=t,this.work=i,this.pending=!1}return q(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,i){return void 0===i&&(i=0),V.root.setInterval(e.flush.bind(e,this),i)},t.prototype.recycleAsyncId=function(e,t,i){return void 0===i&&(i=0),null!==i&&this.delay===i&&!1===this.pending?t:V.root.clearInterval(t)&&undefined||undefined},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var i=!1,r=undefined;try{this.work(e)}catch(n){i=!0,r=!!n&&n||new Error(n)}if(i)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,i=t.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(H.Action)},z={Scheduler:function(){function e(t,i){void 0===i&&(i=e.now),this.SchedulerAction=t,this.now=i}return e.prototype.schedule=function(e,t,i){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(i,t)},e.now=Date.now?Date.now:function(){return+new Date},e}()},W=b&&b.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},K={async:new({AsyncScheduler:function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=undefined}return W(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}},t}(z.Scheduler)}.AsyncScheduler)(Y.AsyncAction)},X={isScheduler:function(e){return e&&"function"==typeof e.schedule}},Z={isDate:function(e){return e instanceof Date&&!isNaN(+e)}},J=b&&b.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},Q=function(e){function t(t,i,r){void 0===t&&(t=0),e.call(this),this.period=-1,this.dueTime=0,g.isNumeric(i)?this.period=Number(i)<1&&1||Number(i):X.isScheduler(i)&&(r=i),X.isScheduler(r)||(r=K.async),this.scheduler=r,this.dueTime=Z.isDate(t)?+t-this.scheduler.now():t}return J(t,e),t.create=function(e,i,r){return void 0===e&&(e=0),new t(e,i,r)},t.dispatch=function(e){var t=e.index,i=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===i)return r.complete();e.index=t+1,this.schedule(e,i)}},t.prototype._subscribe=function(e){var i=this.period,r=this.dueTime;return this.scheduler.schedule(t.dispatch,r,{index:0,period:i,subscriber:e})},t}(U.Observable),ee=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o};e.VgEvents=function(){return function(){}}(),e.VgEvents.VG_ABORT="abort",e.VgEvents.VG_CAN_PLAY="canplay",e.VgEvents.VG_CAN_PLAY_THROUGH="canplaythrough",e.VgEvents.VG_DURATION_CHANGE="durationchange",e.VgEvents.VG_EMPTIED="emptied",e.VgEvents.VG_ENCRYPTED="encrypted",e.VgEvents.VG_ENDED="ended",e.VgEvents.VG_ERROR="error",e.VgEvents.VG_LOADED_DATA="loadeddata",e.VgEvents.VG_LOADED_METADATA="loadedmetadata",e.VgEvents.VG_LOAD_START="loadstart",e.VgEvents.VG_PAUSE="pause",e.VgEvents.VG_PLAY="play",e.VgEvents.VG_PLAYING="playing",e.VgEvents.VG_PROGRESS="progress",e.VgEvents.VG_RATE_CHANGE="ratechange",e.VgEvents.VG_SEEK="seek",e.VgEvents.VG_SEEKED="seeked",e.VgEvents.VG_SEEKING="seeking",e.VgEvents.VG_STALLED="stalled",e.VgEvents.VG_SUSPEND="suspend",e.VgEvents.VG_TIME_UPDATE="timeupdate",e.VgEvents.VG_VOLUME_CHANGE="volumechange",e.VgEvents.VG_WAITING="waiting",e.VgEvents.VG_LOAD="load",e.VgEvents.VG_ENTER="enter",e.VgEvents.VG_EXIT="exit",e.VgEvents.VG_START_ADS="startads",e.VgEvents.VG_END_ADS="endads",e.VgEvents=ee([t.Injectable()],e.VgEvents);var te=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},ie=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.VgMedia=function(){function t(t,i){this.api=t,this.ref=i,this.state=e.VgStates.VG_PAUSED,this.time={current:0,total:0,left:0},this.buffer={end:0},this.canPlay=!1,this.canPlayThrough=!1,this.isBufferDetected=!1,this.isMetadataLoaded=!1,this.isReadyToPlay=!1,this.isWaiting=!1,this.isCompleted=!1,this.isLive=!1,this.checkInterval=200,this.currentPlayPos=0,this.lastPlayPos=0,this.playAtferSync=!1,this.bufferDetected=new n.Subject}return t.prototype.ngOnInit=function(){var t=this;this.vgMedia.nodeName?this.elem=this.vgMedia:this.elem=this.vgMedia.elem,this.api.registerMedia(this),this.subscriptions={abort:r.Observable.fromEvent(this.elem,e.VgEvents.VG_ABORT),canPlay:r.Observable.fromEvent(this.elem,e.VgEvents.VG_CAN_PLAY),canPlayThrough:r.Observable.fromEvent(this.elem,e.VgEvents.VG_CAN_PLAY_THROUGH),durationChange:r.Observable.fromEvent(this.elem,e.VgEvents.VG_DURATION_CHANGE),emptied:r.Observable.fromEvent(this.elem,e.VgEvents.VG_EMPTIED),encrypted:r.Observable.fromEvent(this.elem,e.VgEvents.VG_ENCRYPTED),ended:r.Observable.fromEvent(this.elem,e.VgEvents.VG_ENDED),error:r.Observable.fromEvent(this.elem,e.VgEvents.VG_ERROR),loadedData:r.Observable.fromEvent(this.elem,e.VgEvents.VG_LOADED_DATA),loadedMetadata:r.Observable.fromEvent(this.elem,e.VgEvents.VG_LOADED_METADATA),loadStart:r.Observable.fromEvent(this.elem,e.VgEvents.VG_LOAD_START),pause:r.Observable.fromEvent(this.elem,e.VgEvents.VG_PAUSE),play:r.Observable.fromEvent(this.elem,e.VgEvents.VG_PLAY),playing:r.Observable.fromEvent(this.elem,e.VgEvents.VG_PLAYING),progress:r.Observable.fromEvent(this.elem,e.VgEvents.VG_PROGRESS),rateChange:r.Observable.fromEvent(this.elem,e.VgEvents.VG_RATE_CHANGE),seeked:r.Observable.fromEvent(this.elem,e.VgEvents.VG_SEEKED),seeking:r.Observable.fromEvent(this.elem,e.VgEvents.VG_SEEKING),stalled:r.Observable.fromEvent(this.elem,e.VgEvents.VG_STALLED),suspend:r.Observable.fromEvent(this.elem,e.VgEvents.VG_SUSPEND),timeUpdate:r.Observable.fromEvent(this.elem,e.VgEvents.VG_TIME_UPDATE),volumeChange:r.Observable.fromEvent(this.elem,e.VgEvents.VG_VOLUME_CHANGE),waiting:r.Observable.fromEvent(this.elem,e.VgEvents.VG_WAITING),startAds:r.Observable.fromEvent(window,e.VgEvents.VG_START_ADS),endAds:r.Observable.fromEvent(window,e.VgEvents.VG_END_ADS),mutation:r.Observable.create(function(e){var i=new MutationObserver(function(t){e.next(t)});return i.observe(t.elem,{childList:!0,attributes:!0}),function(){i.disconnect()}}),bufferDetected:this.bufferDetected},this.mutationObs=this.subscriptions.mutation.subscribe(this.onMutation.bind(this)),this.canPlayObs=this.subscriptions.canPlay.subscribe(this.onCanPlay.bind(this)),this.canPlayThroughObs=this.subscriptions.canPlayThrough.subscribe(this.onCanPlayThrough.bind(this)),this.loadedMetadataObs=this.subscriptions.loadedMetadata.subscribe(this.onLoadMetadata.bind(this)),this.waitingObs=this.subscriptions.waiting.subscribe(this.onWait.bind(this)),this.progressObs=this.subscriptions.progress.subscribe(this.onProgress.bind(this)),this.endedObs=this.subscriptions.ended.subscribe(this.onComplete.bind(this)),this.playingObs=this.subscriptions.playing.subscribe(this.onStartPlaying.bind(this)),this.playObs=this.subscriptions.play.subscribe(this.onPlay.bind(this)),this.pauseObs=this.subscriptions.pause.subscribe(this.onPause.bind(this)),this.timeUpdateObs=this.subscriptions.timeUpdate.subscribe(this.onTimeUpdate.bind(this)),this.volumeChangeObs=this.subscriptions.volumeChange.subscribe(this.onVolumeChange.bind(this)),this.errorObs=this.subscriptions.error.subscribe(this.onError.bind(this)),this.vgMaster&&this.api.playerReadyEvent.subscribe(function(){t.prepareSync()})},t.prototype.prepareSync=function(){var e=this,t=[];for(var i in this.api.medias)this.api.medias[i]&&t.push(this.api.medias[i].subscriptions.canPlay);this.canPlayAllSubscription=r.Observable.combineLatest(t,function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];t.some(function(e){return 4===e.target.readyState})&&!e.syncSubscription&&(e.startSync(),e.syncSubscription.unsubscribe())}).subscribe()},t.prototype.startSync=function(){var t=this;this.syncSubscription=Q.create(0,1e3).subscribe(function(){for(var i in t.api.medias)if(t.api.medias[i]!==t){var r=t.api.medias[i].currentTime-t.currentTime;r<-.3||r>.3?(t.playAtferSync=t.state===e.VgStates.VG_PLAYING,t.pause(),t.api.medias[i].pause(),t.api.medias[i].currentTime=t.currentTime):t.playAtferSync&&(t.play(),t.api.medias[i].play(),t.playAtferSync=!1)}})},t.prototype.onMutation=function(e){for(var t=0,i=e.length;t<i;t++){var r=e[t];if("attributes"===r.type&&"src"===r.attributeName){if(r.target.src&&r.target.src.length>0&&r.target.src.indexOf("blob:")<0){this.loadMedia();break}}else if("childList"===r.type&&r.removedNodes.length&&"source"===r.removedNodes[0].nodeName.toLowerCase()){this.loadMedia();break}}},t.prototype.loadMedia=function(){var e=this;this.vgMedia.pause(),this.vgMedia.currentTime=0,this.stopBufferCheck(),this.isBufferDetected=!0,this.bufferDetected.next(this.isBufferDetected),setTimeout(function(){return e.vgMedia.load()},10)},t.prototype.play=function(){var t=this;this.playPromise||this.state!==e.VgStates.VG_PAUSED&&this.state!==e.VgStates.VG_ENDED||(this.playPromise=this.vgMedia.play(),this.playPromise&&this.playPromise.then&&this.playPromise["catch"]&&this.playPromise.then(function(){t.playPromise=null})["catch"](function(){}))},t.prototype.pause=function(){var e=this;this.playPromise?this.playPromise.then(function(){e.vgMedia.pause()}):this.vgMedia.pause()},Object.defineProperty(t.prototype,"id",{get:function(){var e=undefined;return this.vgMedia&&(e=this.vgMedia.id),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.vgMedia.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.vgMedia.currentTime},set:function(e){this.vgMedia.currentTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this.vgMedia.volume},set:function(e){this.vgMedia.volume=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playbackRate",{get:function(){return this.vgMedia.playbackRate},set:function(e){this.vgMedia.playbackRate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffered",{get:function(){return this.vgMedia.buffered},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textTracks",{get:function(){return this.vgMedia.textTracks},enumerable:!0,configurable:!0}),t.prototype.onCanPlay=function(e){this.isBufferDetected=!1,this.bufferDetected.next(this.isBufferDetected),this.canPlay=!0,this.ref.detectChanges()},t.prototype.onCanPlayThrough=function(e){this.isBufferDetected=!1,this.bufferDetected.next(this.isBufferDetected),this.canPlayThrough=!0,this.ref.detectChanges()},t.prototype.onLoadMetadata=function(t){this.isMetadataLoaded=!0,this.time={current:0,left:0,total:1e3*this.duration},this.state=e.VgStates.VG_PAUSED;var i=Math.round(this.time.total);this.isLive=i===Infinity,this.ref.detectChanges()},t.prototype.onWait=function(e){this.isWaiting=!0,this.ref.detectChanges()},t.prototype.onComplete=function(t){this.isCompleted=!0,this.state=e.VgStates.VG_ENDED,this.ref.detectChanges()},t.prototype.onStartPlaying=function(t){this.state=e.VgStates.VG_PLAYING,this.ref.detectChanges()},t.prototype.onPlay=function(t){this.state=e.VgStates.VG_PLAYING,this.vgMaster&&(this.syncSubscription&&!this.syncSubscription.closed||this.startSync()),this.startBufferCheck(),this.ref.detectChanges()},t.prototype.onPause=function(t){this.state=e.VgStates.VG_PAUSED,this.vgMaster&&(this.playAtferSync||this.syncSubscription.unsubscribe()),this.stopBufferCheck(),this.ref.detectChanges()},t.prototype.onTimeUpdate=function(e){var t=this.buffered.length-1;this.time={current:1e3*this.currentTime,total:this.time.total,left:1e3*(this.duration-this.currentTime)},t>=0&&(this.buffer={end:1e3*this.buffered.end(t)}),this.ref.detectChanges()},t.prototype.onProgress=function(e){var t=this.buffered.length-1;t>=0&&(this.buffer={end:1e3*this.buffered.end(t)}),this.ref.detectChanges()},t.prototype.onVolumeChange=function(e){this.ref.detectChanges()},t.prototype.onError=function(e){this.ref.detectChanges()},t.prototype.bufferCheck=function(){var e=1/this.checkInterval;this.currentPlayPos=this.currentTime,!this.isBufferDetected&&this.currentPlayPos<this.lastPlayPos+e&&(this.isBufferDetected=!0),this.isBufferDetected&&this.currentPlayPos>this.lastPlayPos+e&&(this.isBufferDetected=!1),this.bufferDetected.closed||this.bufferDetected.next(this.isBufferDetected),this.lastPlayPos=this.currentPlayPos},t.prototype.startBufferCheck=function(){var e=this;this.checkBufferSubscription=Q.create(0,this.checkInterval).subscribe(function(){e.bufferCheck()})},t.prototype.stopBufferCheck=function(){this.checkBufferSubscription&&this.checkBufferSubscription.unsubscribe(),this.isBufferDetected=!1,this.bufferDetected.next(this.isBufferDetected)},t.prototype.seekTime=function(e,t){void 0===t&&(t=!1);var i,r=this.duration;i=t?e*r/100:e,this.currentTime=i},t.prototype.addTextTrack=function(e,t,i,r){var n=this.vgMedia.addTextTrack(e,t,i);return r&&(n.mode=r),n},t.prototype.ngOnDestroy=function(){this.vgMedia.src="",this.mutationObs.unsubscribe(),this.canPlayObs.unsubscribe(),this.canPlayThroughObs.unsubscribe(),this.loadedMetadataObs.unsubscribe(),this.waitingObs.unsubscribe(),this.progressObs.unsubscribe(),this.endedObs.unsubscribe(),this.playingObs.unsubscribe(),this.playObs.unsubscribe(),this.pauseObs.unsubscribe(),this.timeUpdateObs.unsubscribe(),this.volumeChangeObs.unsubscribe(),this.errorObs.unsubscribe(),this.checkBufferSubscription&&this.checkBufferSubscription.unsubscribe(),this.syncSubscription&&this.syncSubscription.unsubscribe(),this.bufferDetected.complete(),this.bufferDetected.unsubscribe(),this.api.unregisterMedia(this)},t}(),te([t.Input(),ie("design:type",Object)],e.VgMedia.prototype,"vgMedia",void 0),te([t.Input(),ie("design:type",Boolean)],e.VgMedia.prototype,"vgMaster",void 0),e.VgMedia=te([t.Directive({selector:"[vgMedia]"}),ie("design:paramtypes",[e.VgAPI,t.ChangeDetectorRef])],e.VgMedia);var re=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},ne=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.VgControlsHidden=function(){function e(){this.isHiddenSubject=new n.Subject,this.isHidden=this.isHiddenSubject.asObservable()}return e.prototype.state=function(e){this.isHiddenSubject.next(e)},e}(),e.VgControlsHidden=re([t.Injectable(),ne("design:paramtypes",[])],e.VgControlsHidden);var se=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},oe=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.VgPlayer=function(){function i(e,i,r,n){this.api=i,this.fsAPI=r,this.controlsHidden=n,this.isFullscreen=!1,this.isNativeFullscreen=!1,this.areControlsHidden=!1,this.onPlayerReady=new t.EventEmitter,this.onMediaReady=new t.EventEmitter,this.subscriptions=[],this.elem=e.nativeElement,this.api.registerElement(this.elem)}return i.prototype.ngAfterContentInit=function(){var e=this;this.medias.toArray().forEach(function(t){e.api.registerMedia(t)}),this.fsAPI.init(this.elem,this.medias),this.subscriptions.push(this.fsAPI.onChangeFullscreen.subscribe(this.onChangeFullscreen.bind(this))),this.subscriptions.push(this.controlsHidden.isHidden.subscribe(this.onHideControls.bind(this))),this.api.onPlayerReady(this.fsAPI),this.onPlayerReady.next(this.api)},i.prototype.onChangeFullscreen=function(t){this.fsAPI.nativeFullscreen?this.isNativeFullscreen=t:(this.isFullscreen=t,this.zIndex=t?e.VgUtils.getZIndex().toString():"auto")},i.prototype.onHideControls=function(e){this.areControlsHidden=e},i.prototype.ngOnDestroy=function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})},i}(),se([t.HostBinding("class.fullscreen"),oe("design:type",Boolean)],e.VgPlayer.prototype,"isFullscreen",void 0),se([t.HostBinding("class.native-fullscreen"),oe("design:type",Boolean)],e.VgPlayer.prototype,"isNativeFullscreen",void 0),se([t.HostBinding("class.controls-hidden"),oe("design:type",Boolean)],e.VgPlayer.prototype,"areControlsHidden",void 0),se([t.HostBinding("style.z-index"),oe("design:type",String)],e.VgPlayer.prototype,"zIndex",void 0),se([t.Output(),oe("design:type",t.EventEmitter)],e.VgPlayer.prototype,"onPlayerReady",void 0),se([t.Output(),oe("design:type",t.EventEmitter)],e.VgPlayer.prototype,"onMediaReady",void 0),se([t.ContentChildren(e.VgMedia),oe("design:type",t.QueryList)],e.VgPlayer.prototype,"medias",void 0),e.VgPlayer=se([t.Component({selector:"vg-player",encapsulation:t.ViewEncapsulation.None,template:"\n      <ng-content></ng-content>\n    ",styles:["\n      vg-player {\n        font-family: 'videogular';\n        position: relative;\n        display: flex;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        background-color: black; }\n        vg-player.fullscreen {\n          position: fixed;\n          left: 0;\n          top: 0; }\n        vg-player.native-fullscreen.controls-hidden {\n          cursor: none; }\n    "],providers:[e.VgAPI,e.VgFullscreenAPI,e.VgControlsHidden]}),oe("design:paramtypes",[t.ElementRef,e.VgAPI,e.VgFullscreenAPI,e.VgControlsHidden])],e.VgPlayer);var ce=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},ae=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.VgCuePoints=function(){function i(e){this.ref=e,this.onEnterCuePoint=new t.EventEmitter,this.onUpdateCuePoint=new t.EventEmitter,this.onExitCuePoint=new t.EventEmitter,this.onCompleteCuePoint=new t.EventEmitter,this.subscriptions=[],this.cuesSubscriptions=[],this.totalCues=0}return i.prototype.ngOnInit=function(){var t=r.Observable.fromEvent(this.ref.nativeElement,e.VgEvents.VG_LOAD);this.subscriptions.push(t.subscribe(this.onLoad.bind(this)))},i.prototype.onLoad=function(e){var t=e.target.track.cues;this.ref.nativeElement.cues=t,this.updateCuePoints(t)},i.prototype.updateCuePoints=function(t){this.cuesSubscriptions.forEach(function(e){return e.unsubscribe()});for(var i=0,n=t.length;i<n;i++){var s=r.Observable.fromEvent(t[i],e.VgEvents.VG_ENTER);this.cuesSubscriptions.push(s.subscribe(this.onEnter.bind(this)));var o=r.Observable.fromEvent(t[i],e.VgEvents.VG_EXIT);this.cuesSubscriptions.push(o.subscribe(this.onExit.bind(this)))}},i.prototype.onEnter=function(e){this.onEnterCuePoint.next(e.target)},i.prototype.onExit=function(e){this.onExitCuePoint.next(e.target)},i.prototype.ngDoCheck=function(){if(this.ref.nativeElement.cues){this.totalCues!==this.ref.nativeElement.track.cues.length&&(this.totalCues=this.ref.nativeElement.track.cues.length,this.ref.nativeElement.cues=this.ref.nativeElement.track.cues,this.updateCuePoints(this.ref.nativeElement.track.cues))}},i.prototype.ngOnDestroy=function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})},i}(),ce([t.Output("onEnterCuePoint"),ae("design:type",t.EventEmitter)],e.VgCuePoints.prototype,"onEnterCuePoint",void 0),ce([t.Output("onUpdateCuePoint"),ae("design:type",t.EventEmitter)],e.VgCuePoints.prototype,"onUpdateCuePoint",void 0),ce([t.Output("onExitCuePoint"),ae("design:type",t.EventEmitter)],e.VgCuePoints.prototype,"onExitCuePoint",void 0),ce([t.Output("onCompleteCuePoint"),ae("design:type",t.EventEmitter)],e.VgCuePoints.prototype,"onCompleteCuePoint",void 0),e.VgCuePoints=ce([t.Directive({selector:"[vgCuePoints]"}),ae("design:paramtypes",[t.ElementRef])],e.VgCuePoints);var ue=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},le=[e.VgPlayer,e.VgMedia,e.VgCuePoints];e.VgCoreModule=function(){return function(){}}(),e.VgCoreModule=ue([t.NgModule({imports:[i.CommonModule],declarations:[le],exports:[le],providers:[e.VgAPI,e.VgFullscreenAPI,e.VgUtils,e.VgControlsHidden]})],e.VgCoreModule),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:undefined};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}if("undefined"==typeof window||"function"==typeof window.CustomEvent)return!1;e.prototype=window.Event.prototype,window.CustomEvent=e}(),Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=core.umd.min.js.map
